<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <title>Dataset Metrics: Demo Circuits from LTspice</title>
        <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
    </head>
    <body>
        <h1 style="text-align:center">Dataset Metrics: Demo Circuits from LTspice</h1>
    </body>
    <script type="text/javascript">
        function createChart(data, layout) {
            const div = document.createElement('div');
            const id = layout.title + Date.now();
            div.setAttribute('id', id);
            document.body.appendChild(div);
            Plotly.newPlot(id, data, layout);
        }

        function createBarChart(data, labels) {
            const layout = {
                title: labels.title,
                xaxis: {title: labels.x},
                yaxis: {title: labels.y},
            };
            createChart(data, layout);
        }
        function createDatasetVisualizations(dataset) {
            delete dataset.componentCounts['0'];  // remove empty files
            createBarChart([{
                x: Object.keys(dataset.componentCounts),
                y: Object.values(dataset.componentCounts),
                type: 'bar',
            }], {
                title: 'Component Count Distribution',
                x: '# of Components',
                y: 'Count',
            });

            createBarChart([
                {
                    x: Object.keys(dataset.componentTypeCounts),
                    y: Object.values(dataset.componentTypeCounts),
                    type: 'bar'
                }
            ], {
                title: 'Dataset Component Counts',
                x: 'Component Type',
                y: 'Frequency',
            });

            createChart([
                {
                    x: dataset.degreeDistributions.elements,
                    name: 'Elements',
                    type: 'histogram',
                    opacity: 0.5,
                },
                {
                    x: dataset.degreeDistributions.nodes,
                    name: 'Nodes',
                    opacity: 0.5,
                    type: 'histogram',
                },
                {
                    x: dataset.degreeDistributions.combined,
                    name: 'Combined',
                    opacity: 0.5,
                    type: 'histogram',
                }
            ], {
                    title: 'Histogram of Average Netlist Degree',
                    xaxis: {
                        title: 'Average Degree in Netlist'
                    },
                    yaxis: {
                        title: 'Frequency'
                    }
            });

            // TODO: maybe add a switcher?
            Object.keys(dataset.componentTypesByNetlist).sort().forEach(componentType => {
                const counts = dataset.componentTypesByNetlist[componentType];
                createBarChart([
                    {
                        x: Object.keys(counts),
                        y: Object.values(counts),
                        type: 'bar'
                    }
                ], {
                    title: `Usage of ${componentType} per Netlist`,
                    x: `# of ${componentType} Components in Netlist`,
                    y: '# of Netlists',
                });
            });
        }

        createDatasetVisualizations({"componentCounts": {"4": 3, "5": 18, "6": 23, "7": 47, "8": 49, "9": 49, "10": 62, "11": 64, "12": 58, "13": 60, "14": 59, "15": 79, "16": 51, "17": 28, "18": 25, "19": 41, "20": 26, "21": 24, "22": 29, "23": 24, "24": 23, "25": 15, "26": 16, "27": 17, "28": 14, "29": 11, "30": 10, "31": 4, "32": 4, "33": 8, "34": 4, "35": 8, "36": 7, "37": 10, "38": 9, "39": 14, "40": 9, "41": 6, "42": 6, "43": 8, "44": 2, "45": 7, "46": 3, "47": 12, "48": 4, "49": 1, "50": 2, "51": 3, "52": 7, "55": 1, "57": 2, "61": 5, "62": 1, "63": 2, "64": 2, "69": 2, "70": 2, "71": 2, "82": 1, "84": 2}, "componentTypeCounts": {"A": 7, "B": 7, "C": 6603, "D": 1162, "E": 6, "G": 2, "I": 170, "J": 6, "K": 137, "L": 1124, "M": 852, "Q": 89, "R": 7608, "S": 40, "V": 1548, "X": 1467}, "componentTypesByNetlist": {"C": {"1": 45, "2": 149, "3": 142, "4": 133, "5": 98, "6": 97, "7": 92, "8": 60, "9": 43, "10": 40, "11": 23, "12": 14, "13": 33, "14": 7, "15": 18, "16": 10, "17": 17, "18": 6, "19": 8, "20": 3, "21": 2, "22": 2, "23": 3, "24": 4, "25": 1, "27": 1, "29": 1}, "D": {"1": 249, "2": 160, "3": 44, "4": 43, "5": 12, "6": 15, "7": 5, "8": 7, "9": 4, "12": 1}, "M": {"1": 125, "2": 87, "3": 21, "4": 65, "5": 15, "6": 15, "8": 3, "9": 2, "11": 1, "12": 1}, "R": {"1": 61, "2": 88, "3": 132, "4": 138, "5": 113, "6": 88, "7": 84, "8": 75, "9": 45, "10": 59, "11": 44, "12": 10, "13": 26, "14": 17, "15": 18, "16": 19, "17": 15, "18": 8, "19": 5, "20": 8, "21": 4, "22": 2, "23": 1, "24": 4, "25": 2, "26": 4, "27": 4, "29": 1, "31": 1, "32": 3, "37": 2}, "V": {"1": 791, "2": 176, "3": 81, "4": 25, "5": 10, "6": 2}, "X": {"1": 854, "2": 125, "3": 79, "4": 16, "5": 4, "6": 7}, "I": {"1": 128, "2": 21}, "L": {"1": 424, "2": 173, "3": 30, "4": 29, "5": 10, "6": 3, "7": 4, "8": 4, "10": 2}, "K": {"1": 93, "2": 12, "3": 4, "4": 2}, "Q": {"1": 24, "2": 6, "3": 5, "6": 1, "8": 4}, "E": {"1": 4, "2": 1}, "S": {"1": 35, "2": 1, "3": 1}, "A": {"1": 1, "6": 1}, "J": {"1": 6}, "B": {"1": 3, "2": 2}, "G": {"1": 2}}, "degreeDistributions": {"combined": [3.037037037037037, 2.9565217391304346, 3.0, 2.3636363636363638, 2.5454545454545454, 3.032258064516129, 3.3684210526315788, 3.111111111111111, 3.2941176470588234, 3.0344827586206895, 2.893617021276596, 3.04, 2.9, 3.0, 2.7, 2.736842105263158, 3.111111111111111, 2.9523809523809526, 3.081081081081081, 2.7777777777777777, 3.090909090909091, 2.5454545454545454, 2.95, 2.8636363636363638, 3.074074074074074, 2.727272727272727, 2.8823529411764706, 2.9565217391304346, 3.238095238095238, 2.9583333333333335, 2.9473684210526314, 2.4210526315789473, 2.95, 3.12, 2.6666666666666665, 2.727272727272727, 2.8823529411764706, 2.769230769230769, 3.2, 3.225806451612903, 3.090909090909091, 3.04, 3.0434782608695654, 2.918918918918919, 2.8214285714285716, 2.769230769230769, 2.96, 3.0, 2.782608695652174, 2.8823529411764706, 2.8823529411764706, 3.076923076923077, 2.96, 2.9166666666666665, 2.8260869565217392, 2.9411764705882355, 3.0, 2.4444444444444446, 3.0, 3.0434782608695654, 3.1666666666666665, 2.96, 2.9473684210526314, 3.066666666666667, 2.75, 2.9473684210526314, 3.0, 3.263157894736842, 2.75, 2.746268656716418, 3.0476190476190474, 3.1666666666666665, 3.4, 2.8333333333333335, 3.1666666666666665, 2.875, 2.4210526315789473, 3.1666666666666665, 2.5, 3.1666666666666665, 2.75, 3.1666666666666665, 3.1219512195121952, 2.8823529411764706, 3.142857142857143, 2.727272727272727, 2.6206896551724137, 2.923076923076923, 2.769230769230769, 2.893617021276596, 2.933333333333333, 2.9, 2.923076923076923, 3.411764705882353, 2.857142857142857, 3.309090909090909, 3.0, 2.7906976744186047, 2.8823529411764706, 2.9375, 3.4545454545454546, 3.0, 3.0, 3.0588235294117645, 2.727272727272727, 2.6956521739130435, 3.0, 2.888888888888889, 2.6666666666666665, 2.736842105263158, 2.769230769230769, 2.967741935483871, 3.411764705882353, 3.0, 2.6666666666666665, 3.0, 2.9473684210526314, 2.727272727272727, 2.75, 3.25, 2.6666666666666665, 3.185185185185185, 3.3043478260869565, 3.142857142857143, 2.1666666666666665, 2.962962962962963, 2.75, 3.090909090909091, 2.96, 3.066666666666667, 2.6666666666666665, 2.823529411764706, 2.933333333333333, 3.090909090909091, 3.125, 2.933333333333333, 2.8333333333333335, 3.090909090909091, 2.8, 3.0, 2.923076923076923, 3.1538461538461537, 2.909090909090909, 3.0, 2.8, 2.9473684210526314, 3.2, 2.95, 2.727272727272727, 3.0, 3.411764705882353, 3.032258064516129, 2.6666666666666665, 3.125, 3.1666666666666665, 3.411764705882353, 2.75, 2.8363636363636364, 2.727272727272727, 2.888888888888889, 3.1219512195121952, 2.9714285714285715, 2.769230769230769, 2.923076923076923, 2.689655172413793, 2.8, 3.074074074074074, 2.814814814814815, 3.066666666666667, 2.588235294117647, 3.176470588235294, 3.225806451612903, 2.5714285714285716, 3.257142857142857, 3.3043478260869565, 2.8, 2.857142857142857, 3.272727272727273, 2.933333333333333, 2.9894736842105263, 3.1818181818181817, 2.9473684210526314, 2.9565217391304346, 2.9523809523809526, 3.090909090909091, 2.8, 3.0, 2.9473684210526314, 3.4545454545454546, 3.142857142857143, 2.746268656716418, 2.5714285714285716, 2.857142857142857, 2.9523809523809526, 3.176470588235294, 2.888888888888889, 3.076923076923077, 2.8260869565217392, 3.125, 2.6315789473684212, 3.2, 3.085714285714286, 3.25, 2.6666666666666665, 3.076923076923077, 2.533333333333333, 3.4285714285714284, 2.9473684210526314, 3.0526315789473686, 2.923076923076923, 2.875, 2.6666666666666665, 2.8, 3.0434782608695654, 3.2941176470588234, 3.0833333333333335, 2.5, 2.857142857142857, 3.090909090909091, 3.1333333333333333, 2.608695652173913, 2.6956521739130435, 3.0476190476190474, 2.727272727272727, 3.0526315789473686, 3.032258064516129, 3.090909090909091, 3.090909090909091, 2.7142857142857144, 2.75, 3.130434782608696, 3.0833333333333335, 2.727272727272727, 2.5, 2.782608695652174, 2.526315789473684, 2.736842105263158, 3.142857142857143, 2.8823529411764706, 3.066666666666667, 2.6666666666666665, 2.736842105263158, 3.0, 3.375, 3.142857142857143, 2.5555555555555554, 3.1475409836065573, 3.090909090909091, 2.9523809523809526, 2.588235294117647, 3.0, 2.909090909090909, 3.076923076923077, 2.857142857142857, 2.769230769230769, 2.7246376811594204, 3.090909090909091, 2.769230769230769, 2.75, 2.727272727272727, 3.230769230769231, 3.28, 3.0, 2.8333333333333335, 2.8421052631578947, 3.0434782608695654, 2.782608695652174, 3.0625, 3.076923076923077, 3.085714285714286, 3.5172413793103448, 3.0, 3.125, 3.037037037037037, 2.8, 3.0, 3.04, 2.814814814814815, 3.185185185185185, 2.727272727272727, 2.8, 2.9523809523809526, 2.962962962962963, 2.75, 2.7058823529411766, 3.0476190476190474, 2.9411764705882355, 3.076923076923077, 2.962962962962963, 2.88, 2.769230769230769, 2.8333333333333335, 2.933333333333333, 2.727272727272727], "nodes": [3.4166666666666665, 3.7777777777777777, 3.0, 2.1666666666666665, 2.3333333333333335, 2.9375, 3.5555555555555554, 3.5, 4.3076923076923075, 3.142857142857143, 4.0, 3.8, 2.4166666666666665, 4.5, 3.0, 3.25, 4.666666666666667, 3.1, 3.5625, 2.272727272727273, 4.25, 2.0, 4.214285714285714, 3.0, 3.772727272727273, 2.5, 3.5, 3.7777777777777777, 4.25, 3.380952380952381, 3.2941176470588234, 2.090909090909091, 4.214285714285714, 3.9, 2.1818181818181817, 3.3333333333333335, 3.5, 3.6, 4.0, 4.166666666666667, 4.25, 3.4545454545454546, 3.28125, 3.6, 3.761904761904762, 3.272727272727273, 3.0833333333333335, 3.375, 2.909090909090909, 3.5, 3.5, 3.6363636363636362, 3.3636363636363638, 2.9166666666666665, 3.611111111111111, 2.7777777777777777, 3.375, 1.6296296296296295, 3.6, 3.28125, 2.85, 3.3636363636363638, 3.2941176470588234, 4.181818181818182, 2.357142857142857, 2.5454545454545454, 3.0, 3.875, 3.6666666666666665, 3.68, 3.5555555555555554, 3.8, 4.25, 3.090909090909091, 3.8, 2.5555555555555554, 2.090909090909091, 3.8, 2.2222222222222223, 2.85, 2.4444444444444446, 3.8, 3.764705882352941, 3.5, 4.4, 3.0, 2.7142857142857144, 3.1666666666666665, 3.272727272727273, 4.0, 2.838709677419355, 2.4166666666666665, 2.923076923076923, 4.833333333333333, 3.3333333333333335, 2.5277777777777777, 3.4285714285714284, 3.1578947368421053, 3.5, 2.9375, 3.8, 3.1363636363636362, 3.375, 3.7142857142857144, 2.5, 3.4444444444444446, 3.4285714285714284, 3.7142857142857144, 2.2857142857142856, 3.25, 2.5714285714285716, 3.5384615384615383, 4.833333333333333, 3.0, 2.6666666666666665, 3.4285714285714284, 3.2941176470588234, 3.75, 3.142857142857143, 4.333333333333333, 2.6666666666666665, 3.5833333333333335, 4.222222222222222, 4.4, 1.8571428571428572, 3.3333333333333335, 2.357142857142857, 4.25, 3.0833333333333335, 4.181818181818182, 2.769230769230769, 3.4285714285714284, 3.142857142857143, 4.25, 3.5714285714285716, 3.142857142857143, 3.4, 4.25, 2.45, 3.6923076923076925, 3.8, 2.7333333333333334, 2.6666666666666665, 3.3, 3.111111111111111, 3.5, 3.5555555555555554, 4.214285714285714, 2.5, 3.6666666666666665, 4.833333333333333, 2.9375, 2.5, 3.5714285714285716, 3.8, 4.833333333333333, 3.142857142857143, 3.5454545454545454, 3.0, 3.7142857142857144, 3.764705882352941, 3.25, 3.272727272727273, 3.8, 3.391304347826087, 2.8, 3.772727272727273, 2.7142857142857144, 4.181818181818182, 2.75, 3.857142857142857, 3.8461538461538463, 1.8, 3.5625, 4.222222222222222, 3.111111111111111, 3.3333333333333335, 3.0, 3.142857142857143, 3.227272727272727, 4.375, 3.2941176470588234, 3.7777777777777777, 3.4444444444444446, 4.25, 2.3333333333333335, 2.727272727272727, 2.8, 4.222222222222222, 4.125, 3.68, 3.0, 2.857142857142857, 3.1, 3.857142857142857, 3.25, 3.3333333333333335, 3.611111111111111, 3.125, 2.7777777777777777, 3.2, 2.8421052631578947, 4.333333333333333, 2.0, 3.6363636363636362, 2.7142857142857144, 4.0, 3.111111111111111, 3.2222222222222223, 4.75, 2.5555555555555554, 2.6666666666666665, 3.111111111111111, 3.5, 4.666666666666667, 4.111111111111111, 2.5, 2.857142857142857, 4.25, 3.6153846153846154, 3.0, 2.066666666666667, 3.5555555555555554, 2.5, 3.2222222222222223, 2.9375, 3.4, 4.25, 3.1666666666666665, 3.6666666666666665, 3.6, 3.7, 3.75, 2.5, 2.909090909090909, 2.1818181818181817, 3.25, 4.4, 3.5, 4.181818181818182, 2.5, 3.25, 3.0, 3.857142857142857, 4.583333333333333, 1.7692307692307692, 3.4285714285714284, 3.7777777777777777, 3.1, 2.75, 4.0, 3.2, 3.3333333333333335, 3.3333333333333335, 3.272727272727273, 3.2413793103448274, 3.7777777777777777, 3.272727272727273, 3.6666666666666665, 3.75, 3.230769230769231, 4.1, 3.6666666666666665, 3.090909090909091, 3.6, 3.28125, 2.909090909090909, 3.5, 3.6363636363636362, 2.8421052631578947, 3.4, 3.0, 3.5714285714285716, 3.4166666666666665, 3.5, 3.0, 3.8, 2.375, 3.5833333333333335, 3.0, 3.0, 3.1, 3.6363636363636362, 3.142857142857143, 3.2857142857142856, 3.5555555555555554, 3.125, 2.6666666666666665, 3.6363636363636362, 2.5714285714285716, 3.272727272727273, 4.25, 3.142857142857143, 3.0], "elements": [2.7333333333333334, 2.4285714285714284, 3.0, 2.6, 2.8, 3.1333333333333333, 3.2, 2.8, 2.6666666666666665, 2.933333333333333, 2.2666666666666666, 2.533333333333333, 3.625, 2.25, 2.4545454545454546, 2.3636363636363638, 2.3333333333333335, 2.8181818181818183, 2.7142857142857144, 3.5714285714285716, 2.4285714285714284, 3.5, 2.269230769230769, 2.739130434782609, 2.59375, 3.0, 2.45, 2.4285714285714284, 2.6153846153846154, 2.6296296296296298, 2.6666666666666665, 2.875, 2.269230769230769, 2.6, 3.4285714285714284, 2.3076923076923075, 2.45, 2.25, 2.6666666666666665, 2.6315789473684212, 2.4285714285714284, 2.7142857142857144, 2.8378378378378377, 2.4545454545454546, 2.257142857142857, 2.4, 2.8461538461538463, 2.7, 2.6666666666666665, 2.45, 2.45, 2.6666666666666665, 2.642857142857143, 2.9166666666666665, 2.3214285714285716, 3.125, 2.7, 4.888888888888889, 2.5714285714285716, 2.8378378378378377, 3.5625, 2.642857142857143, 2.6666666666666665, 2.4210526315789473, 3.3, 3.5, 3.0, 2.8181818181818183, 2.2, 2.1904761904761907, 2.6666666666666665, 2.7142857142857144, 2.8333333333333335, 2.6153846153846154, 2.7142857142857144, 3.2857142857142856, 2.875, 2.7142857142857144, 2.857142857142857, 3.5625, 3.142857142857143, 2.7142857142857144, 2.6666666666666665, 2.45, 2.4444444444444446, 2.5, 2.533333333333333, 2.7142857142857144, 2.4, 2.2666666666666666, 3.0344827586206895, 3.625, 2.923076923076923, 2.6363636363636362, 2.5, 4.7894736842105265, 2.6666666666666665, 2.5, 2.45, 2.9375, 3.1666666666666665, 2.875, 2.7, 2.6, 3.0, 2.2142857142857144, 2.6666666666666665, 2.3636363636363638, 3.2, 2.3636363636363638, 3.0, 2.5555555555555554, 2.6363636363636362, 3.0, 2.6666666666666665, 2.6666666666666665, 2.6666666666666665, 2.142857142857143, 2.4444444444444446, 2.6, 2.6666666666666665, 2.8666666666666667, 2.7142857142857144, 2.4444444444444446, 2.6, 2.6666666666666665, 3.3, 2.4285714285714284, 2.8461538461538463, 2.4210526315789473, 2.5714285714285716, 2.4, 2.75, 2.4285714285714284, 2.7777777777777777, 2.75, 2.4285714285714284, 2.4285714285714284, 3.2666666666666666, 2.526315789473684, 2.375, 3.727272727272727, 3.2, 2.75, 2.5454545454545454, 2.5454545454545454, 2.909090909090909, 2.269230769230769, 3.0, 2.5384615384615383, 2.6363636363636362, 3.1333333333333333, 2.857142857142857, 2.7777777777777777, 2.7142857142857144, 2.6363636363636362, 2.4444444444444446, 2.3636363636363638, 2.5, 2.3636363636363638, 2.6666666666666665, 2.736842105263158, 2.4, 2.375, 2.2285714285714286, 2.8, 2.59375, 2.923076923076923, 2.4210526315789473, 2.4444444444444446, 2.7, 2.7777777777777777, 4.5, 3.0, 2.7142857142857144, 2.5454545454545454, 2.5, 3.6, 2.75, 2.784313725490196, 2.5, 2.6666666666666665, 2.4285714285714284, 2.5833333333333335, 2.4285714285714284, 3.5, 3.3333333333333335, 3.111111111111111, 2.923076923076923, 2.5384615384615383, 2.1904761904761907, 2.25, 2.857142857142857, 2.8181818181818183, 2.7, 2.6, 2.857142857142857, 2.3214285714285716, 3.125, 2.5, 3.2, 3.375, 2.6, 4.0, 2.6666666666666665, 2.375, 3.0, 2.8, 2.9, 2.111111111111111, 3.2857142857142856, 2.6666666666666665, 2.5454545454545454, 2.6923076923076925, 2.5454545454545454, 2.466666666666667, 2.5, 2.857142857142857, 2.4285714285714284, 2.764705882352941, 2.3076923076923075, 3.875, 2.6666666666666665, 3.0, 2.9, 3.1333333333333333, 2.8333333333333335, 2.4285714285714284, 2.375, 2.2, 2.769230769230769, 2.642857142857143, 2.142857142857143, 2.5, 2.6666666666666665, 3.0, 2.3636363636363638, 2.4444444444444446, 2.45, 2.4210526315789473, 2.857142857142857, 2.3636363636363638, 3.0, 3.0, 2.391304347826087, 4.6, 2.909090909090909, 2.6153846153846154, 2.8181818181818183, 2.4444444444444446, 2.4, 2.6666666666666665, 2.857142857142857, 2.5, 2.4, 2.35, 2.6153846153846154, 2.4, 2.2, 2.142857142857143, 3.230769230769231, 2.7333333333333334, 2.5384615384615383, 2.6153846153846154, 2.347826086956522, 2.8378378378378377, 2.6666666666666665, 2.7222222222222223, 2.6666666666666665, 3.375, 3.642857142857143, 3.0, 2.7777777777777777, 2.7333333333333334, 2.3333333333333335, 3.0, 2.533333333333333, 3.4545454545454546, 2.8666666666666667, 2.5, 2.625, 2.8181818181818183, 2.5, 2.4444444444444446, 2.3, 2.6666666666666665, 2.7777777777777777, 3.6363636363636362, 2.5, 3.272727272727273, 2.4, 2.125, 2.75, 2.5]}});
    </script>
</html>

