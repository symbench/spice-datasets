<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <title>Dataset Metrics: User-created KiCad Netlists (from GitHub)</title>
        <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
    </head>
    <body>
        <h1 style="text-align:center">Dataset Metrics: User-created KiCad Netlists (from GitHub)</h1>
    </body>
    <script type="text/javascript">
        function createBarChart(data, labels) {
            const layout = {
                title: labels.title,
                xaxis: {title: labels.x},
                yaxis: {title: labels.y},
            };
            const div = document.createElement('div');
            const id = labels.title + Date.now();
            div.setAttribute('id', id);
            document.body.appendChild(div);
            Plotly.newPlot(id, data, layout);
        }

        function createDatasetVisualizations(dataset) {
            delete dataset.componentCounts['0'];  // remove empty files
            createBarChart([{
                x: Object.keys(dataset.componentCounts),
                y: Object.values(dataset.componentCounts),
                type: 'bar',
            }], {
                title: 'Component Count Distribution',
                x: '# of Components',
                y: 'Count',
            });

            createBarChart([
                {
                    x: Object.keys(dataset.componentTypeCounts),
                    y: Object.values(dataset.componentTypeCounts),
                    type: 'bar'
                }
            ], {
                title: 'Dataset Component Counts',
                x: 'Component Type',
                y: 'Frequency',
            });


            // TODO: maybe add a switcher?
            Object.keys(dataset.componentTypesByNetlist).sort().forEach(componentType => {
                const counts = dataset.componentTypesByNetlist[componentType];
                createBarChart([
                    {
                        x: Object.keys(counts),
                        y: Object.values(counts),
                        type: 'bar'
                    }
                ], {
                    title: `Usage of ${componentType} per Netlist`,
                    x: `# of ${componentType} Components in Netlist`,
                    y: '# of Netlists',
                });
            });
        }

        createDatasetVisualizations({"componentCounts": {"0": 892, "1": 51, "2": 66, "3": 50, "4": 49, "5": 46, "6": 32, "7": 29, "8": 28, "9": 25, "10": 19, "11": 31, "12": 22, "13": 27, "14": 15, "15": 15, "16": 19, "17": 24, "18": 18, "19": 17, "20": 21, "21": 15, "22": 13, "23": 9, "24": 11, "25": 12, "26": 7, "27": 12, "28": 6, "29": 8, "30": 10, "31": 14, "32": 13, "33": 6, "34": 5, "35": 6, "36": 9, "37": 6, "38": 3, "39": 7, "40": 3, "41": 4, "42": 4, "43": 9, "44": 4, "45": 1, "46": 9, "47": 3, "48": 7, "49": 8, "50": 2, "51": 3, "52": 6, "53": 1, "54": 2, "55": 4, "56": 5, "57": 3, "58": 3, "59": 4, "60": 3, "61": 4, "62": 1, "63": 2, "64": 4, "65": 1, "66": 1, "68": 2, "69": 1, "71": 4, "72": 2, "73": 1, "74": 1, "75": 3, "76": 1, "77": 2, "78": 1, "79": 1, "81": 2, "82": 3, "83": 6, "84": 3, "85": 2, "86": 3, "87": 3, "88": 2, "89": 3, "90": 2, "91": 1, "92": 8, "93": 2, "94": 2, "95": 3, "98": 1, "99": 1, "100": 1, "101": 3, "103": 6, "107": 1, "109": 1, "111": 1, "112": 3, "115": 1, "116": 1, "118": 1, "121": 2, "122": 1, "123": 1, "125": 1, "126": 1, "134": 1, "140": 1, "143": 1, "145": 1, "147": 2, "152": 1, "153": 1, "155": 1, "162": 1, "164": 1, "166": 1, "174": 2, "175": 1, "179": 1, "187": 1, "190": 1, "192": 1, "205": 1, "206": 1, "211": 1, "212": 1, "214": 1, "215": 1, "223": 1, "232": 1, "234": 1, "235": 1, "245": 1, "247": 1, "248": 1, "249": 1, "253": 1, "256": 1, "259": 1, "261": 1, "279": 1, "283": 1, "285": 1, "290": 1, "317": 1, "332": 1, "376": 1, "438": 1, "523": 1, "712": 1}, "componentTypeCounts": {"A": 85, "B": 110, "C": 6415, "D": 5183, "E": 12, "F": 119, "G": 9, "H": 257, "I": 103, "J": 3323, "K": 1480, "L": 577, "M": 533, "N": 58, "O": 17, "P": 869, "Q": 1496, "R": 9080, "S": 1538, "T": 656, "U": 2164, "V": 137, "W": 45, "X": 104, "Y": 109, "Z": 7}, "componentTypesByNetlist": {"C": {"1": 74, "2": 86, "3": 59, "4": 52, "5": 37, "6": 40, "7": 28, "8": 33, "9": 18, "10": 26, "11": 13, "12": 26, "13": 9, "14": 8, "15": 12, "16": 8, "17": 10, "18": 10, "19": 13, "20": 6, "21": 4, "23": 3, "24": 13, "26": 3, "27": 5, "28": 1, "29": 6, "30": 2, "31": 2, "32": 1, "33": 2, "34": 2, "35": 2, "37": 4, "38": 2, "40": 2, "42": 1, "43": 1, "46": 1, "48": 1, "53": 1, "64": 1, "68": 1, "69": 1, "78": 1, "83": 1, "95": 1, "109": 1, "203": 1, "225": 1}, "F": {"1": 36, "2": 21, "3": 3, "4": 2, "6": 4}, "J": {"1": 116, "2": 146, "3": 101, "4": 63, "5": 27, "6": 27, "7": 26, "8": 19, "9": 12, "10": 11, "11": 8, "12": 10, "13": 8, "14": 7, "15": 8, "16": 6, "17": 3, "18": 6, "19": 1, "20": 1, "22": 3, "25": 2, "27": 1, "28": 2, "33": 1, "38": 2, "47": 1, "69": 1, "130": 1, "133": 1}, "U": {"1": 298, "2": 156, "3": 69, "4": 57, "5": 28, "6": 23, "7": 17, "8": 11, "9": 15, "10": 7, "11": 6, "12": 5, "13": 3, "14": 3, "16": 1, "17": 3, "18": 2, "19": 1, "23": 1, "28": 1, "49": 1}, "R": {"1": 90, "2": 93, "3": 65, "4": 66, "5": 44, "6": 26, "7": 23, "8": 39, "9": 25, "10": 16, "11": 14, "12": 22, "13": 8, "14": 8, "15": 17, "16": 12, "17": 13, "18": 15, "19": 9, "20": 4, "21": 6, "22": 8, "23": 5, "24": 10, "26": 4, "27": 5, "28": 3, "29": 3, "30": 2, "31": 1, "32": 7, "33": 2, "34": 7, "35": 4, "36": 2, "38": 2, "39": 1, "40": 1, "41": 3, "43": 3, "44": 1, "45": 2, "46": 2, "48": 2, "49": 2, "50": 2, "51": 3, "52": 1, "54": 2, "56": 1, "58": 1, "62": 1, "63": 1, "64": 1, "68": 1, "76": 1, "79": 1, "82": 1, "90": 1, "93": 1, "96": 2, "101": 1, "106": 1, "112": 1, "121": 2, "134": 1, "141": 1, "159": 1, "172": 1}, "S": {"1": 96, "2": 34, "3": 26, "4": 16, "5": 3, "6": 6, "7": 1, "10": 2, "11": 1, "12": 1, "15": 1, "16": 3, "17": 1, "18": 1, "19": 1, "21": 2, "29": 1, "33": 1, "36": 1, "42": 2, "48": 1, "50": 1, "59": 1, "68": 1, "70": 1, "71": 1, "74": 1, "75": 1, "84": 2, "107": 1}, "T": {"1": 34, "2": 17, "3": 11, "4": 5, "5": 5, "6": 1, "7": 3, "8": 7, "9": 2, "12": 2, "13": 1, "14": 1, "16": 1, "17": 1, "23": 1, "98": 1, "102": 2}, "X": {"1": 38, "2": 7, "3": 3, "4": 4, "5": 1, "6": 2, "10": 1}, "Y": {"1": 83, "2": 10, "3": 2}, "D": {"1": 109, "2": 65, "3": 33, "4": 37, "5": 23, "6": 15, "7": 16, "8": 17, "9": 5, "10": 9, "11": 14, "12": 9, "13": 5, "14": 2, "15": 2, "16": 10, "17": 4, "18": 5, "19": 1, "20": 1, "21": 4, "22": 2, "24": 1, "26": 1, "27": 2, "29": 1, "32": 3, "33": 1, "35": 1, "36": 1, "39": 1, "40": 1, "42": 1, "44": 1, "45": 2, "46": 1, "48": 2, "50": 1, "66": 1, "67": 1, "68": 1, "69": 1, "70": 3, "72": 1, "77": 1, "78": 1, "80": 1, "94": 1, "95": 1, "100": 1, "104": 1, "105": 1, "113": 1, "119": 1, "120": 1, "123": 2, "576": 1}, "Q": {"1": 70, "2": 42, "3": 11, "4": 14, "5": 12, "6": 14, "7": 7, "8": 13, "9": 5, "10": 1, "11": 1, "12": 3, "13": 1, "14": 3, "16": 1, "18": 3, "19": 1, "26": 2, "29": 1, "56": 1, "64": 1, "73": 1, "96": 1, "99": 1, "106": 1, "135": 1}, "N": {"1": 4, "2": 10, "4": 2, "6": 3, "8": 1}, "L": {"1": 90, "2": 31, "3": 11, "4": 6, "5": 6, "6": 5, "8": 1, "9": 1, "10": 1, "12": 1, "20": 2, "23": 1, "27": 2, "42": 1, "50": 1, "60": 1}, "B": {"1": 48, "2": 16, "30": 1}, "H": {"1": 13, "2": 12, "3": 4, "4": 23, "5": 2, "6": 4, "7": 2, "8": 6, "9": 1, "11": 1}, "K": {"1": 9, "2": 6, "3": 1, "4": 3, "5": 3, "8": 1, "9": 1, "15": 1, "18": 1, "32": 1, "36": 1, "41": 1, "60": 1, "74": 1, "81": 1, "85": 1, "106": 1, "107": 1, "112": 1, "130": 1, "147": 1, "182": 1, "186": 1}, "A": {"1": 19, "2": 5, "3": 1, "4": 1, "5": 3, "16": 1, "18": 1}, "E": {"1": 4, "4": 2}, "G": {"1": 3, "2": 3}, "I": {"1": 30, "2": 11, "3": 4, "4": 1, "7": 1, "8": 1, "9": 1, "11": 1}, "M": {"1": 22, "2": 13, "4": 20, "5": 1, "6": 2, "13": 1, "14": 1, "46": 1, "62": 2, "71": 1, "120": 1}, "O": {"1": 9, "2": 4}, "V": {"1": 35, "2": 11, "3": 15, "4": 6, "5": 1, "6": 1}, "W": {"1": 7, "4": 1, "10": 1, "24": 1}, "Z": {"1": 3, "2": 2}, "P": {"1": 64, "2": 29, "3": 18, "4": 10, "5": 6, "6": 5, "7": 6, "8": 10, "9": 1, "10": 6, "11": 6, "12": 2, "13": 2, "14": 1, "17": 3, "18": 2, "20": 1, "26": 2, "27": 1, "43": 2}}});
    </script>
</html>

