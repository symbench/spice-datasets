function createBarChart(data, labels) {
    const layout = {
        title: labels.title,
        xaxis: {title: labels.x},
        yaxis: {title: labels.y},
    };
    const div = document.createElement('div');
    const id = labels.title + Date.now();
    div.setAttribute('id', id);
    document.body.appendChild(div);
    Plotly.newPlot(id, data, layout);
}

const componentCounts = [
    {"x": ["3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "60", "61", "62", "63", "64", "65", "66", "67", "68", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "80", "81", "83", "84", "85", "86", "87", "88", "89", "90", "91", "92", "94", "95", "96", "97", "98", "100", "101", "102", "103", "105", "111", "114", "115", "117", "118", "120", "123", "124", "125", "127", "128", "140", "142", "145", "147", "149", "154", "155", "157", "164", "166", "168", "177", "181", "189", "192", "194", "207", "208", "213", "214", "216", "217", "225", "236", "238", "247", "249", "251", "252", "255", "258", "261", "263", "281", "285", "287", "292", "319", "336", "378", "440", "525", "714"], "y": [51.0, 66.0, 48.0, 48.0, 43.0, 31.0, 29.0, 27.0, 27.0, 20.0, 27.0, 19.0, 30.0, 20.0, 17.0, 17.0, 23.0, 19.0, 18.0, 21.0, 16.0, 12.0, 9.0, 10.0, 12.0, 8.0, 12.0, 7.0, 8.0, 12.0, 12.0, 13.0, 4.0, 7.0, 6.0, 9.0, 6.0, 4.0, 7.0, 3.0, 3.0, 4.0, 9.0, 5.0, 1.0, 8.0, 3.0, 8.0, 8.0, 2.0, 3.0, 6.0, 1.0, 2.0, 4.0, 5.0, 3.0, 3.0, 4.0, 3.0, 4.0, 1.0, 2.0, 4.0, 1.0, 1.0, 2.0, 1.0, 1.0, 4.0, 2.0, 1.0, 1.0, 3.0, 1.0, 2.0, 1.0, 1.0, 2.0, 3.0, 6.0, 3.0, 1.0, 3.0, 3.0, 1.0, 4.0, 2.0, 7.0, 5.0, 2.0, 2.0, 1.0, 1.0, 1.0, 1.0, 3.0, 6.0, 1.0, 3.0, 2.0, 1.0, 1.0, 1.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 3.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], "type": "bar"}
];

createBarChart(componentCounts, {
    title: 'Component Count Distribution',
    x: '# of Components',
    y: 'Count',
});

const componentTypeCounts = {"K": 2110, "D": 6789, "U": 2670, "J": 3726, "P": 1131, "R": 11160, "C": 7820, "B": 134, "I": 131, "H": 322, "O": 28, "Q": 1729, "L": 686, "F": 151, "S": 2103, "T": 678, "V": 140, "M": 560, "X": 126, "A": 88, "Y": 127, "W": 46, "N": 60, "G": 11, "E": 13, "Z": 10};
createBarChart([
    {
        x: Object.keys(componentTypeCounts),
        y: Object.values(componentTypeCounts),
        type: 'bar'
    }
], {
    title: 'Dataset Component Counts',
    x: 'Component Type',
    y: 'Frequency',
});

const componentTypesByNetlist = {"K": {"182": 1, "134": 2, "147": 1, "130": 1, "1": 9, "2": 6, "74": 2, "18": 2, "9": 3, "15": 4, "4": 5, "107": 1, "8": 1, "71": 1, "41": 1, "60": 1, "5": 3, "3": 5, "85": 1, "112": 1, "116": 1, "186": 1, "106": 1, "32": 1, "36": 1, "81": 1}, "D": {"123": 2, "120": 3, "40": 4, "2": 75, "1": 125, "4": 41, "13": 6, "11": 18, "80": 1, "12": 13, "8": 18, "48": 2, "17": 4, "5": 27, "32": 5, "100": 1, "9": 10, "69": 4, "33": 1, "35": 1, "3": 46, "7": 22, "67": 2, "15": 6, "72": 1, "14": 5, "6": 17, "10": 11, "21": 4, "20": 1, "44": 1, "104": 1, "42": 1, "36": 1, "576": 1, "16": 13, "70": 3, "22": 2, "27": 4, "29": 3, "77": 1, "113": 1, "18": 5, "66": 2, "45": 2, "119": 2, "68": 1, "24": 1, "19": 2, "78": 1, "26": 1, "50": 1, "95": 1, "99": 1, "105": 1, "94": 1, "39": 1, "46": 1}, "U": {"4": 66, "2": 185, "1": 352, "3": 86, "5": 37, "6": 26, "9": 17, "20": 1, "8": 16, "13": 3, "11": 7, "7": 20, "14": 3, "12": 6, "10": 8, "28": 2, "26": 2, "49": 1, "18": 2, "23": 1, "15": 1, "17": 4, "16": 1, "19": 1}, "J": {"1": 152, "3": 112, "6": 32, "4": 77, "2": 157, "9": 14, "8": 21, "16": 6, "27": 2, "5": 31, "13": 8, "7": 26, "10": 13, "19": 1, "15": 9, "38": 2, "69": 1, "22": 4, "17": 4, "12": 11, "14": 8, "18": 6, "133": 1, "28": 2, "11": 8, "25": 3, "20": 2, "130": 1, "33": 1, "47": 1}, "P": {"1": 75, "3": 20, "6": 6, "10": 6, "8": 17, "5": 6, "2": 30, "7": 13, "12": 2, "26": 2, "11": 6, "9": 1, "4": 12, "14": 1, "17": 6, "18": 2, "13": 3, "43": 2, "20": 4, "27": 1}, "R": {"2": 114, "4": 83, "17": 17, "8": 41, "5": 49, "3": 70, "1": 99, "34": 12, "32": 7, "10": 23, "14": 9, "15": 19, "23": 6, "11": 16, "93": 1, "96": 2, "49": 2, "82": 2, "48": 2, "7": 27, "43": 3, "16": 12, "21": 7, "26": 5, "22": 9, "63": 1, "18": 17, "24": 11, "41": 3, "6": 30, "9": 26, "27": 5, "12": 25, "25": 3, "29": 5, "51": 3, "38": 3, "33": 2, "54": 2, "39": 1, "101": 1, "19": 12, "28": 4, "13": 9, "35": 4, "36": 3, "56": 2, "52": 3, "53": 1, "172": 1, "30": 3, "141": 1, "76": 1, "89": 1, "115": 1, "44": 1, "60": 2, "112": 1, "90": 2, "121": 2, "50": 2, "45": 3, "62": 2, "159": 1, "20": 5, "31": 2, "46": 2, "40": 1, "134": 1, "106": 1, "64": 1, "58": 1, "68": 1, "80": 1, "79": 1}, "C": {"2": 104, "30": 5, "5": 46, "8": 42, "4": 62, "19": 15, "1": 80, "3": 66, "29": 6, "16": 9, "14": 8, "12": 32, "24": 16, "10": 27, "7": 34, "31": 3, "6": 45, "9": 21, "18": 11, "37": 4, "42": 1, "34": 3, "38": 2, "23": 4, "27": 5, "17": 13, "11": 18, "33": 2, "15": 13, "20": 9, "21": 8, "13": 11, "53": 1, "26": 3, "46": 3, "48": 3, "109": 1, "95": 1, "64": 2, "78": 1, "67": 1, "68": 1, "225": 1, "43": 1, "83": 1, "28": 1, "32": 1, "35": 2, "25": 2, "203": 1, "22": 1, "40": 2, "69": 1}, "B": {"2": 23, "1": 58, "30": 1}, "I": {"2": 18, "3": 6, "1": 34, "11": 1, "4": 2, "7": 1, "9": 1, "8": 1}, "H": {"4": 33, "1": 14, "8": 7, "3": 4, "11": 1, "7": 2, "2": 20, "5": 2, "6": 4, "9": 1}, "O": {"2": 9, "1": 10}, "Q": {"2": 53, "9": 6, "1": 88, "4": 19, "3": 14, "135": 1, "96": 1, "73": 1, "106": 1, "56": 1, "8": 17, "6": 14, "26": 2, "7": 10, "5": 13, "14": 5, "99": 1, "11": 1, "12": 3, "10": 1, "19": 1, "29": 1, "27": 1, "42": 1, "13": 1, "18": 3, "64": 1, "16": 1}, "L": {"1": 115, "20": 2, "2": 36, "9": 1, "5": 7, "3": 14, "4": 8, "42": 1, "27": 2, "8": 1, "6": 5, "10": 3, "50": 1, "60": 1, "23": 1, "12": 1, "32": 1}, "F": {"1": 46, "2": 27, "3": 5, "6": 4, "4": 3}, "S": {"1": 129, "4": 22, "84": 2, "107": 1, "3": 33, "33": 1, "36": 1, "2": 37, "10": 2, "5": 4, "68": 1, "15": 1, "42": 2, "21": 2, "6": 7, "74": 1, "16": 3, "59": 1, "12": 1, "48": 1, "18": 1, "29": 1, "75": 2, "67": 3, "19": 1, "17": 1, "71": 1, "69": 2, "50": 1, "7": 1, "11": 1, "70": 1, "56": 1}, "T": {"1": 41, "8": 7, "9": 2, "7": 3, "5": 5, "2": 18, "3": 14, "6": 1, "102": 2, "4": 6, "12": 2, "13": 1, "16": 1, "23": 1, "14": 1, "17": 1, "98": 1}, "V": {"1": 36, "3": 15, "2": 12, "4": 6, "5": 1, "6": 1}, "M": {"4": 21, "5": 1, "1": 25, "62": 2, "2": 16, "71": 1, "6": 2, "120": 1, "14": 2, "13": 1, "46": 1}, "X": {"1": 55, "3": 4, "2": 8, "6": 2, "4": 4, "5": 1, "10": 1}, "A": {"16": 1, "1": 20, "4": 1, "2": 6, "3": 1, "5": 3, "18": 1}, "Y": {"1": 101, "2": 10, "3": 2}, "W": {"1": 8, "24": 1, "4": 1, "10": 1}, "N": {"2": 11, "1": 4, "4": 2, "6": 3, "8": 1}, "G": {"1": 3, "2": 4}, "E": {"1": 5, "4": 2}, "Z": {"1": 4, "2": 3}};

// TODO: maybe add a switcher?
Object.keys(componentTypesByNetlist).sort().forEach(componentType => {
    const counts = componentTypesByNetlist[componentType];
    createBarChart([
        {
            x: Object.keys(counts),
            y: Object.values(counts),
            type: 'bar'
        }
    ], {
        title: `Usage of ${componentType} per Netlist`,
        x: `# of ${componentType} Components in Netlist`,
        y: '# of Netlists',
    });
});
